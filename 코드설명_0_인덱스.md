# Platform Jump Game - 전체 코드 상세 설명 (인덱스)

## 📚 문서 목록

이 프로젝트의 모든 .c와 .h 파일을 line-by-line으로 설명한 문서들입니다.

---

## 📖 읽는 순서 (권장)

### 1단계: 구조 이해
1. **코드설명_2_game_h.md** - 게임의 모든 구조체와 상수 정의
   - 플레이어, 몬스터, 코인, 플랫폼 구조체
   - 게임 상수 (WIDTH, HEIGHT, GRAVITY 등)
   - 함수 선언

### 2단계: 메인 프로그램
2. **코드설명_1_main.md** - 프로그램 진입점과 게임 루프
   - main() 함수
   - run() 함수 (게임 메인 루프)
   - showMenu() 함수 (메뉴 시스템)

### 3단계: 게임 로직
3. **코드설명_3_game_c_part1.md** - 초기화 및 파티클
   - initPlayer() - 플레이어 초기화
   - initPlatforms() - Stage 1 플랫폼 배치
   - initEnemies() - Stage 1 몬스터 배치
   - initCoins() - Stage 1 코인 배치
   - addParticle() - 파티클 생성
   - updateParticles() - 파티클 업데이트

4. **코드설명_4_game_c_part2.md** - 플레이어 물리 엔진
   - updatePlayer() - 중력, 충돌, 마찰력
   - 플랫폼 충돌 검사
   - 낙사 처리
   - 무적 시간

5. **코드설명_5_game_c_part3.md** - 몬스터 AI
   - updateEnemies() - 몬스터 이동 및 AI
   - Type 0: 일반 몬스터
   - Type 1: 추적 몬스터 (호밍)
   - Type 2: 비행 몬스터
   - 플레이어와의 충돌 처리

6. **코드설명_6_game_c_part4.md** - 입력 처리 및 게임 오버
   - handleInput() - 키보드 입력
   - updateCoins() - 코인 수집 및 포탈
   - checkGameOver() - 게임 오버 조건

7. **코드설명_10_stages.md** - 스테이지 시스템
   - initStage2() - Stage 2 초기화
   - initHiddenStage() - 히든 스테이지
   - returnFromHiddenStage() - 복귀
   - nextStage() - 스테이지 진행
   - initGame() - 게임 전체 초기화

### 4단계: 그래픽 시스템
8. **코드설명_7_graphics.md** - 화면 렌더링
   - 더블 버퍼링 시스템
   - drawGame() - 메인 렌더링 함수
   - drawPlayer(), drawEnemies(), drawCoins() 등
   - drawHUD() - 상단 정보창

### 5단계: 랭킹 시스템
9. **코드설명_8_ranking.md** - Min Heap 랭킹
   - MinHeap 구조체
   - insertHeap() - O(log 10) 삽입
   - heapifyUp(), heapifyDown() - 힙 속성 유지
   - loadRankings(), saveRankings() - 파일 I/O
   - displayRankings() - TOP 10 표시

### 6단계: 사운드 시스템
10. **코드설명_9_music.md** - BGM 및 효과음
    - playBGM() - MCI로 BGM 재생
    - updateBGM() - 무한 반복 구현
    - stopBGM() - BGM 정지
    - playSFX() - PlaySound로 효과음 재생

---

## 🎯 주요 알고리즘 및 기술

### 물리 엔진
- **중력**: 매 프레임 velocityY += 1
- **마찰력**: 지상 0.8배, 공중 0.95배 감속
- **충돌 감지**: AABB (Axis-Aligned Bounding Box)
- **플랫폼 보정**: Y 좌표 자동 조정

### 더블 버퍼링
- 이전 프레임과 비교하여 변경된 부분만 렌더링
- 화면 깜박임 방지
- 성능 최적화

### Min Heap 랭킹
- TOP 10만 유지 (메모리 O(10))
- 삽입 시간 O(log 10) = O(1)
- 파일 기반 영속성

### 몬스터 AI
- **Type 0**: 단순 좌우 이동
- **Type 1**: 120프레임마다 80프레임 추적
- **Type 2**: 대각선 이동 + 벽 반사

### 사운드 시스템
- **BGM**: MCI API (무한 반복)
- **효과음**: PlaySound API (비동기)

---

## 📊 파일 구조

```
JaRuGuJo_finalProject/
├── main.c              → 메인 프로그램 (진입점, 게임 루프)
├── game.h              → 게임 구조체 및 상수 정의
├── game.c              → 게임 로직 구현 (물리, AI, 입력)
├── graphics.h          → 그래픽 함수 선언
├── graphics.c          → 화면 렌더링 (더블 버퍼링)
├── ranking.h           → 랭킹 시스템 구조체
├── ranking.c           → Min Heap 랭킹 구현
├── music.h             → 사운드 시스템 선언
├── music.c             → BGM 및 효과음 구현
├── rankings.txt        → 랭킹 데이터 파일
├── mainstage.wav       → 배경 음악
├── jump.wav            → 점프 효과음
├── hitsound.wav        → 피격 효과음
└── deadsound.wav       → 죽음 효과음
```

---

## 🎮 게임 플로우

```
1. main() 실행
   ↓
2. run() 호출
   ↓
3. loadRankings() - 기존 랭킹 로드
   ↓
4. 플레이어 이름 입력
   ↓
5. showMenu() - 메뉴 선택
   ↓
6. initGame() - 게임 초기화
   ↓
7. playBGM() - 배경 음악 재생
   ↓
8. 게임 루프 (while !gameOver)
   │  ├── handleInput() - 키보드 입력
   │  ├── updatePlayer() - 플레이어 업데이트
   │  ├── updateEnemies() - 몬스터 업데이트
   │  ├── updateCoins() - 코인 수집
   │  ├── updateParticles() - 파티클 효과
   │  ├── checkGameOver() - 게임 오버 체크
   │  ├── drawGame() - 화면 렌더링
   │  ├── updateBGM() - BGM 무한 반복
   │  └── Sleep(50) - 20 FPS
   ↓
9. stopBGM() - BGM 정지
   ↓
10. insertHeap() - 점수 저장
    ↓
11. saveRankings() - 파일에 저장
    ↓
12. displayRankings() - TOP 10 표시
    ↓
13. 재시작 여부 확인
```

---

## 💡 코드 읽기 팁

1. **구조체부터 이해하기**: game.h의 구조체들을 먼저 파악하세요.
2. **게임 루프 추적하기**: main.c의 while 루프가 핵심입니다.
3. **함수 호출 순서**: 각 함수가 언제 호출되는지 확인하세요.
4. **주석 활용**: 각 코드 블록 위의 설명을 읽으세요.
5. **알고리즘 이해**: 물리 엔진, Min Heap, 더블 버퍼링의 원리를 파악하세요.

---

## 📈 성능 분석

### 시간 복잡도
- **게임 루프**: O(N) - N은 객체 수
- **플랫폼 충돌**: O(P) - P는 플랫폼 수
- **몬스터 업데이트**: O(E) - E는 몬스터 수
- **랭킹 삽입**: O(log 10) = O(1)
- **더블 버퍼링**: O(W × H) - 변경된 픽셀만

### 공간 복잡도
- **게임 상태**: O(1) - 고정 크기 배열
- **랭킹**: O(10) - TOP 10만 유지
- **화면 버퍼**: O(W × H) - 80 × 29

---

## 🔧 확장 가능성

1. **새로운 몬스터 타입 추가**: Enemy 구조체의 type 확장
2. **아이템 시스템**: Coin 구조체 응용
3. **더 많은 스테이지**: initStage3(), initStage4() 추가
4. **멀티플레이어**: Player 배열로 확장
5. **세이브/로드**: GameState를 파일에 저장

---

## 📝 학습 포인트

### C 언어 기초
- 구조체 (struct)
- 포인터 (&, *)
- 배열 및 2차원 배열
- 함수 포인터
- 파일 I/O

### 자료구조
- Min Heap (우선순위 큐)
- 배열 기반 자료구조

### 알고리즘
- 힙 정렬 (heapifyUp, heapifyDown)
- 충돌 감지 (AABB)
- 경로 탐색 (호밍 AI)

### Windows API
- 콘솔 제어 (gotoxy, setColor)
- 멀티미디어 (MCI, PlaySound)
- 키보드 입력 (_kbhit, _getch)

### 게임 개발
- 게임 루프
- 더블 버퍼링
- 물리 엔진 (중력, 마찰)
- AI (FSM - Finite State Machine)
- 파티클 시스템

---

## 🎓 추천 학습 순서

1. **초급**: main.c, game.h 읽기
2. **중급**: game.c (물리, AI) 이해
3. **고급**: graphics.c (더블 버퍼링), ranking.c (Min Heap)
4. **심화**: 코드 수정 및 기능 추가

---

## 📞 문서 활용법

- **처음 읽는 경우**: 위의 "읽는 순서"를 따라가세요.
- **특정 기능 찾기**: 목차에서 해당 파일을 찾으세요.
- **알고리즘 이해**: 각 문서의 "요약" 섹션을 참고하세요.
- **코드 수정**: 해당 함수의 설명을 읽고 수정하세요.

---

**작성일**: 2024
**프로젝트**: Platform Jump Game
**언어**: C
**플랫폼**: Windows Console
